<ChatLayout>:
    orientation: "vertical"
    padding: 10
    spacing: 8

    ScrollView:
        do_scroll_x: False

        Label:
            text: root.chat_text + root.cursor
            size_hint_y: None
            height: self.texture_size[1]
            text_size: self.width, None
            halign: "left"
            valign: "top"

    Label:
        text: root.typing_text
        size_hint_y: None
        height: "24dp"
        color: 0.6, 0.6, 0.6, 1
        italic: True

    BoxLayout:
        size_hint_y: None
        height: "48dp"
        spacing: 5

        TextInput:
            id: user_input
            multiline: False
            hint_text: "Type a message..."
            on_text_validate: root.send_message()

        Button:
            text: "Send"
            size_hint_x: None
            width: "90dp"
            on_press: root.send_message()

        Button:
            text: "Stop"
            size_hint_x: None
            width: "70dp"
            on_press: root.stop_generation()
